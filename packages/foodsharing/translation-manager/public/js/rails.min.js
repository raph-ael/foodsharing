!function($,e){"use strict";$.rails!==e&&$.error("jquery-ujs has already been loaded!");var t,a=$(document);$.rails=t={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote]:not(form button), button[data-confirm]:not(form button)",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",csrfToken:function(){return $("meta[name=csrf-token]").attr("content")},csrfParam:function(){return $("meta[name=csrf-param]").attr("content")},CSRFProtection:function(e){var a=t.csrfToken();a&&e.setRequestHeader("X-CSRF-Token",a)},refreshCSRFTokens:function(){$('form input[name="'+t.csrfParam()+'"]').val(t.csrfToken())},fire:function(e,t,a){var n=$.Event(t);return e.trigger(n,a),n.result!==!1},confirm:function(e){return confirm(e)},ajax:function(e){return $.ajax(e)},href:function(e){return e[0].href},isRemote:function(t){return t.data("remote")!==e&&t.data("remote")!==!1},handleRemote:function(a){var n,r,i,o,l,s;if(t.fire(a,"ajax:before")){if(o=a.data("with-credentials")||null,l=a.data("type")||$.ajaxSettings&&$.ajaxSettings.dataType,a.is("form")){n=a.attr("method"),r=a.attr("action"),i=a.serializeArray();var u=a.data("ujs:submit-button");u&&(i.push(u),a.data("ujs:submit-button",null))}else a.is(t.inputChangeSelector)?(n=a.data("method"),r=a.data("url"),i=a.serialize(),a.data("params")&&(i=i+"&"+a.data("params"))):a.is(t.buttonClickSelector)?(n=a.data("method")||"get",r=a.data("url"),i=a.serialize(),a.data("params")&&(i=i+"&"+a.data("params"))):(n=a.data("method"),r=t.href(a),i=a.data("params")||null);return s={type:n||"GET",data:i,dataType:l,beforeSend:function(n,r){return r.dataType===e&&n.setRequestHeader("accept","*/*;q=0.5, "+r.accepts.script),t.fire(a,"ajax:beforeSend",[n,r])?void a.trigger("ajax:send",n):!1},success:function(e,t,n){a.trigger("ajax:success",[e,t,n])},complete:function(e,t){a.trigger("ajax:complete",[e,t])},error:function(e,t,n){a.trigger("ajax:error",[e,t,n])},crossDomain:t.isCrossDomain(r)},o&&(s.xhrFields={withCredentials:o}),r&&(s.url=r),t.ajax(s)}return!1},isCrossDomain:function(e){var t=document.createElement("a");t.href=location.href;var a=document.createElement("a");try{return a.href=e,a.href=a.href,!a.protocol||!a.host||t.protocol+"//"+t.host!=a.protocol+"//"+a.host}catch(e){return!0}},handleMethod:function(a){var n=t.href(a),r=a.data("method"),i=a.attr("target"),o=t.csrfToken(),l=t.csrfParam(),s=$('<form method="post" action="'+n+'"></form>'),u='<input name="_method" value="'+r+'" type="hidden" />';l===e||o===e||t.isCrossDomain(n)||(u+='<input name="'+l+'" value="'+o+'" type="hidden" />'),i&&s.attr("target",i),s.hide().append(u).appendTo("body"),s.submit()},formElements:function(e,t){return e.is("form")?$(e[0].elements).filter(t):e.find(t)},disableFormElements:function(e){t.formElements(e,t.disableSelector).each(function(){t.disableFormElement($(this))})},disableFormElement:function(t){var a,n;a=t.is("button")?"html":"val",n=t.data("disable-with"),t.data("ujs:enable-with",t[a]()),n!==e&&t[a](n),t.prop("disabled",!0)},enableFormElements:function(e){t.formElements(e,t.enableSelector).each(function(){t.enableFormElement($(this))})},enableFormElement:function(e){var t=e.is("button")?"html":"val";e.data("ujs:enable-with")&&e[t](e.data("ujs:enable-with")),e.prop("disabled",!1)},allowAction:function(e){var a=e.data("confirm"),n=!1,r;if(!a)return!0;if(t.fire(e,"confirm")){try{n=t.confirm(a)}catch(e){(console.error||console.log).call(console,e.stack||e)}r=t.fire(e,"confirm:complete",[n])}return n&&r},blankInputs:function(e,t,a){var n=$(),r,i,o=t||"input,textarea",l=e.find(o);return l.each(function(){if(r=$(this),i=r.is("input[type=checkbox],input[type=radio]")?r.is(":checked"):!!r.val(),i===a){if(r.is("input[type=radio]")&&l.filter('input[type=radio]:checked[name="'+r.attr("name")+'"]').length)return!0;n=n.add(r)}}),n.length?n:!1},nonBlankInputs:function(e,a){return t.blankInputs(e,a,!0)},stopEverything:function(e){return $(e.target).trigger("ujs:everythingStopped"),e.stopImmediatePropagation(),!1},disableElement:function(a){var n=a.data("disable-with");a.data("ujs:enable-with",a.html()),n!==e&&a.html(n),a.bind("click.railsDisable",function(e){return t.stopEverything(e)})},enableElement:function(t){t.data("ujs:enable-with")!==e&&(t.html(t.data("ujs:enable-with")),t.removeData("ujs:enable-with")),t.unbind("click.railsDisable")}},t.fire(a,"rails:attachBindings")&&($.ajaxPrefilter(function(e,a,n){e.crossDomain||t.CSRFProtection(n)}),$(window).on("pageshow.rails",function(){$($.rails.enableSelector).each(function(){var e=$(this);e.data("ujs:enable-with")&&$.rails.enableFormElement(e)}),$($.rails.linkDisableSelector).each(function(){var e=$(this);e.data("ujs:enable-with")&&$.rails.enableElement(e)})}),a.delegate(t.linkDisableSelector,"ajax:complete",function(){t.enableElement($(this))}),a.delegate(t.buttonDisableSelector,"ajax:complete",function(){t.enableFormElement($(this))}),a.delegate(t.linkClickSelector,"click.rails",function(e){var a=$(this),n=a.data("method"),r=a.data("params"),i=e.metaKey||e.ctrlKey;if(!t.allowAction(a))return t.stopEverything(e);if(!i&&a.is(t.linkDisableSelector)&&t.disableElement(a),t.isRemote(a)){if(i&&(!n||"GET"===n)&&!r)return!0;var o=t.handleRemote(a);return o===!1?t.enableElement(a):o.fail(function(){t.enableElement(a)}),!1}return n?(t.handleMethod(a),!1):void 0}),a.delegate(t.buttonClickSelector,"click.rails",function(e){var a=$(this);if(!t.allowAction(a)||!t.isRemote(a))return t.stopEverything(e);a.is(t.buttonDisableSelector)&&t.disableFormElement(a);var n=t.handleRemote(a);return n===!1?t.enableFormElement(a):n.fail(function(){t.enableFormElement(a)}),!1}),a.delegate(t.inputChangeSelector,"change.rails",function(e){var a=$(this);return t.allowAction(a)&&t.isRemote(a)?(t.handleRemote(a),!1):t.stopEverything(e)}),a.delegate(t.formSubmitSelector,"submit.rails",function(a){var n=$(this),r=t.isRemote(n),i,o;if(!t.allowAction(n))return t.stopEverything(a);if(n.attr("novalidate")===e&&(i=t.blankInputs(n,t.requiredInputSelector,!1),i&&t.fire(n,"ajax:aborted:required",[i])))return t.stopEverything(a);if(r){if(o=t.nonBlankInputs(n,t.fileInputSelector)){setTimeout(function(){t.disableFormElements(n)},13);var l=t.fire(n,"ajax:aborted:file",[o]);return l||setTimeout(function(){t.enableFormElements(n)},13),l}return t.handleRemote(n),!1}setTimeout(function(){t.disableFormElements(n)},13)}),a.delegate(t.formInputClickSelector,"click.rails",function(e){var a=$(this);if(!t.allowAction(a))return t.stopEverything(e);var n=a.attr("name"),r=n?{name:n,value:a.val()}:null;a.closest("form").data("ujs:submit-button",r)}),a.delegate(t.formSubmitSelector,"ajax:send.rails",function(e){this===e.target&&t.disableFormElements($(this))}),a.delegate(t.formSubmitSelector,"ajax:complete.rails",function(e){this===e.target&&t.enableFormElements($(this))}),$(function(){t.refreshCSRFTokens()}))}(jQuery);