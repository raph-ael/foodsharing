!function($,t){var e;$.rails=e={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote]",selectChangeSelector:"select[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input:file",CSRFProtection:function(t){var e=$('meta[name="csrf-token"]').attr("content");e&&t.setRequestHeader("X-CSRF-Token",e)},fire:function(t,e,a){var n=$.Event(e);return t.trigger(n,a),n.result!==!1},resolveOrReject:function(t,e){return e?t.resolve():t.reject(),t},confirm:function(t){var a=confirm(t),n=$.Deferred();return e.resolveOrReject(n,a),n.promise()},ajax:function(t){return $.ajax(t)},handleRemote:function(a){var n,r,i,o,l=a.data("cross-domain")||null,u=a.data("type")||$.ajaxSettings&&$.ajaxSettings.dataType,s;e.fire(a,"ajax:before")&&(a.is("form")?(n=a.attr("method"),r=a.attr("action"),i=a.serializeArray(),o=a.data("ujs:submit-button"),o&&(i.push(o),a.data("ujs:submit-button",null))):a.is("select")?(n=a.data("method"),r=a.data("url"),i=a.serialize(),a.data("params")&&(i=i+"&"+a.data("params"))):(n=a.data("method"),r=a.attr("href"),i=a.data("params")||null),s={type:n||"GET",data:i,dataType:u,crossDomain:l,beforeSend:function(n,r){return r.dataType===t&&n.setRequestHeader("accept","*/*;q=0.5, "+r.accepts.script),e.fire(a,"ajax:beforeSend",[n,r])},success:function(t,e,n){a.trigger("ajax:success",[t,e,n])},complete:function(t,e){a.trigger("ajax:complete",[t,e])},error:function(t,e,n){a.trigger("ajax:error",[t,e,n])}},r&&(s.url=r),e.ajax(s))},handleMethod:function(e){var a=e.attr("href"),n=e.data("method")||"GET",r=$("meta[name=csrf-token]").attr("content"),i=$("meta[name=csrf-param]").attr("content"),o=$("<form></form>",{action:a,method:n,"data-ujs-generated":"true"}),l="";"GET"!==n&&(o.attr("method","POST"),l+='<input name="_method" value="'+n+'" type="hidden" />',i!==t&&r!==t&&(l+='<input name="'+i+'" value="'+r+'" type="hidden" />')),o.hide().append(l).appendTo("body"),o.submit()},disableFormElements:function(t){t.find(e.disableSelector).each(function(){var t=$(this),e=t.is("button")?"html":"val";t.data("ujs:enable-with",t[e]()),t[e](t.data("disable-with")),t.attr("disabled","disabled")})},enableFormElements:function(t){t.find(e.enableSelector).each(function(){var t=$(this),e=t.is("button")?"html":"val";t.data("ujs:enable-with")&&t[e](t.data("ujs:enable-with")),t.removeAttr("disabled")})},allowAction:function(t){var a=t.data("confirm"),n,r=$.Deferred();return a?e.fire(t,"confirm")?(n=e.confirm(a),n.then(function(){var a=e.fire(t,"confirm:complete",[!0]);e.resolveOrReject(r,a)},function(){e.fire(t,"confirm:complete",[!1]),r.reject()}),r.promise()):(r.reject(),r.promise()):$.when(!0)},blankInputs:function(t,e,a){var n=$(),r,i=e||"input,textarea";return t.find(i).each(function(){r=$(this),(a?r.val():!r.val())&&(n=n.add(r))}),n.length?n:!1},nonBlankInputs:function(t,a){return e.blankInputs(t,a,!0)},stopEverything:function(t){return $(t.target).trigger("ujs:everythingStopped"),t.stopImmediatePropagation(),!1},callFormSubmitBindings:function(e){var a=e.data("events"),n=!0;return a!==t&&a.submit!==t&&$.each(a.submit,function(t,e){return"function"==typeof e.handler?n=e.handler(e.data):void 0}),n}},$.ajaxPrefilter(function(t,a,n){t.crossDomain||e.CSRFProtection(n)}),$(e.linkClickSelector).live("click.rails",function(a){var n=$(this);e.allowAction(n).then(function(){n.data("remote")!==t?e.handleRemote(n):e.handleMethod(n)},function(){e.stopEverything(a)}),a.preventDefault()}),$(e.selectChangeSelector).live("change.rails",function(t){var a=$(this);e.allowAction(a).then(function(){e.handleRemote(a)},function(){e.stopEverything(t)}),t.preventDefault()}),$(e.formSubmitSelector).live("submit.rails",function(a){var n=$(this),r=n.data("remote")!==t,i=e.blankInputs(n,e.requiredInputSelector),o=e.nonBlankInputs(n,e.fileInputSelector);e.allowAction(n).then(function(){if(i&&n.attr("novalidate")==t&&e.fire(n,"ajax:aborted:required",[i]))return e.stopEverything(a);if(r){if(o)return e.fire(n,"ajax:aborted:file",[o]);if(!$.support.submitBubbles&&e.callFormSubmitBindings(n)===!1)return e.stopEverything(a);e.handleRemote(n)}else setTimeout(function(){e.disableFormElements(n),n.get(0).submit()},13)},function(){e.stopEverything(a)}),a.preventDefault()}),$(e.formInputClickSelector).live("click.rails",function(t){var a=$(this);e.allowAction(a).then(function(){var t=a.attr("name"),e,n=t?{name:t,value:a.val()}:null;e=a.closest("form"),e.data("ujs:submit-button",n),e.submit()},function(){e.stopEverything(t)}),t.preventDefault()}),$(e.formSubmitSelector).live("ajax:beforeSend.rails",function(t){this==t.target&&e.disableFormElements($(this))}),$(e.formSubmitSelector).live("ajax:complete.rails",function(t){this==t.target&&e.enableFormElements($(this))})}(jQuery);